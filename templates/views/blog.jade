extends ../layouts/default

mixin post(post)
	.post(data-ks-editable=editable(user, { list: 'Post', id: post.id }))
		.row
			.col-md-2.text-center
				if post.image.exists
					img.fit(src=post._.image.fit(160,160))
				else
					img.fit(src='/images/noticia_padrao.png')
			.col-md-10
				h3.no-margin: = post.title
				p Publicado em:
					if post.publishedDate
							span.orange 
								| #{post._.publishedDate.format('DD')} de #{post._.publishedDate.format('MMMM')} de #{post._.publishedDate.format('YYYY')}
					if post.categories && post.categories.length
						|  
						each cat, i in post.categories
							a(href='/blog/' + cat.key)= cat.name
							if i < post.categories.length - 1
								| , 
							else
								|  
				p!= post.content.brief
				if post.content.extended
					p.btn.small.orange: a(href='/blog/post/' + post.slug) Leia mais

block intro
	.container
		.row
			.col-md-12.text-center
				h2.orange Notícias
				p
					i Fique por dentro do que movimenta São Paulo
		

block content
	.bg-pb
		.container
			if filters.category && !data.category
				.row
					.col-md-12
						h3 Categoria Inválida.
			else
				if data.posts.results.length
					if data.posts.totalPages < 1
						.row
							.col-md-12
								h3 Nenhuma notícia.
					else
						each post in data.posts.results
							+post(post)
